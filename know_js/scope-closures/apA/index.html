
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../" rel="prev"/>
<link href="../apB/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.0.6" name="generator"/>
<title>Appendix A: Exploring Further - shane0 learning_js</title>
<link href="../../../assets/stylesheets/main.558e4712.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#appendix-a-exploring-further">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-component="outdated" hidden="">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="shane0 learning_js" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="shane0 learning_js">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            shane0 learning_js
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Appendix A: Exploring Further
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/shane0/learning_js" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="shane0 learning_js" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="shane0 learning_js">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    shane0 learning_js
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/shane0/learning_js" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        Home
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../todocli/">
        todo cli
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_3" tabindex="0">
          Bujo
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Bujo" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Bujo
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../bujo/2023/">
        2023
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label aria-expanded="true" class="md-nav__link" for="__nav_4" tabindex="0">
          Know js
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Know js" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Know js
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../">
        Index
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" id="__nav_4_2" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_2" tabindex="0">
          Es next beyond
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Es next beyond" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
          Es next beyond
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../es-next-beyond/">
        TOC: ES.Next &amp; Beyond - 2nd Edition
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../es-next-beyond/ch1/">
        Chapter 1: TODO
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" id="__nav_4_3" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_3" tabindex="0">
          Get started
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Get started" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
          Get started
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../get-started/">
        Table of Contents
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../get-started/apA/">
        Appendix A: Exploring Further
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../get-started/apB/">
        Appendix B: Practice, Practice, Practice!
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../get-started/ch1/">
        Chapter 1: What *Is* JavaScript?
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../get-started/ch2/">
        Chapter 2: Surveying JS
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../get-started/ch3/">
        Chapter 3: Digging to the Roots of JS
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../get-started/ch4/">
        Chapter 4: The Bigger Picture
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" id="__nav_4_4" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_4" tabindex="0">
          Objects classes
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Objects classes" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_4">
<span class="md-nav__icon md-icon"></span>
          Objects classes
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../objects-classes/">
        You Don't Know JS Yet: Objects &amp; Classes - 2nd Edition
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../objects-classes/ch1/">
        Chapter 1: Object Foundations
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../objects-classes/ch2/">
        Chapter 2: How Objects Work
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../objects-classes/ch3/">
        Chapter 3: Classy Objects
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../objects-classes/ch4/">
        Chapter 4: This Works
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../objects-classes/ch5/">
        Chapter 5: Delegation
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" id="__nav_4_5" type="checkbox"/>
<label aria-expanded="true" class="md-nav__link" for="__nav_4_5" tabindex="0">
          Scope closures
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Scope closures" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_5">
<span class="md-nav__icon md-icon"></span>
          Scope closures
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../">
        Scope &amp; Closures - 2nd Edition
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Appendix A: Exploring Further
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Appendix A: Exploring Further
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#implied-scopes">
    Implied Scopes
  </a>
<nav aria-label="Implied Scopes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#parameter-scope">
    Parameter Scope
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#function-name-scope">
    Function Name Scope
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#anonymous-vs-named-functions">
    Anonymous vs. Named Functions
  </a>
<nav aria-label="Anonymous vs. Named Functions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#explicit-or-inferred-names">
    Explicit or Inferred Names?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#missing-names">
    Missing Names?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#who-am-i">
    Who am I?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#names-are-descriptors">
    Names are Descriptors
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arrow-functions">
    Arrow Functions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#iife-variations">
    IIFE Variations
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hoisting-functions-and-variables">
    Hoisting: Functions and Variables
  </a>
<nav aria-label="Hoisting: Functions and Variables" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#function-hoisting">
    Function Hoisting
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#variable-hoisting">
    Variable Hoisting
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-case-for-var">
    The Case for var
  </a>
<nav aria-label="The Case for var" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dont-throw-out-var">
    Don't Throw Out var
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#const-antly-confused">
    const-antly Confused
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#var-and-let">
    var and let
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#whats-the-deal-with-tdz">
    What's the Deal with TDZ?
  </a>
<nav aria-label="What's the Deal with TDZ?" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#where-it-all-started">
    Where It All Started
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#who-let-the-tdz-out">
    Who let the TDZ Out?
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#are-synchronous-callbacks-still-closures">
    Are Synchronous Callbacks Still Closures?
  </a>
<nav aria-label="Are Synchronous Callbacks Still Closures?" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-a-callback">
    What is a Callback?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#synchronous-callback">
    Synchronous Callback?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#synchronous-closure">
    Synchronous Closure?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#defer-to-closure">
    Defer to Closure
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#classic-module-variations">
    Classic Module Variations
  </a>
<nav aria-label="Classic Module Variations" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#wheres-my-api">
    Where's My API?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#asynchronous-module-definition-amd">
    Asynchronous Module Definition (AMD)
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#universal-modules-umd">
    Universal Modules (UMD)
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../apB/">
        Appendix B: Practice
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ch1/">
        Chapter 1: What's the Scope?
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ch2/">
        Chapter 2: Illustrating Lexical Scope
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ch3/">
        Chapter 3: The Scope Chain
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ch4/">
        Chapter 4: Around the Global Scope
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ch5/">
        Chapter 5: The (Not So) Secret Lifecycle of Variables
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ch6/">
        Chapter 6: Limiting Scope Exposure
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ch7/">
        Chapter 7: Using Closures
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ch8/">
        Chapter 8: The Module Pattern
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../closures_bard/">
        closures bard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../scope_bard/">
        scope: bard version
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6" id="__nav_4_6" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_6" tabindex="0">
          Sync async
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Sync async" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_6">
<span class="md-nav__icon md-icon"></span>
          Sync async
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../sync-async/">
        TOC: Sync &amp; Async - 2nd Edition
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sync-async/ch1/">
        Chapter 1: TODO
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_7" id="__nav_4_7" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_4_7" tabindex="0">
          Types grammar
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Types grammar" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_7">
<span class="md-nav__icon md-icon"></span>
          Types grammar
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../types-grammar/">
        TOC: Types &amp; Grammar - 2nd Edition
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../types-grammar/ch1/">
        Chapter 1: Primitive Values
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../types-grammar/ch2/">
        Chapter 2: Primitive Behaviors
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../types-grammar/ch3/">
        Chapter 3: Object Values
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../types-grammar/ch4/">
        Chapter 4: Coercing Values
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<label aria-expanded="false" class="md-nav__link" for="__nav_5" tabindex="0">
          Nucamp
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Nucamp" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          Nucamp
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nucamp/">
        nucamp notes
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#implied-scopes">
    Implied Scopes
  </a>
<nav aria-label="Implied Scopes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#parameter-scope">
    Parameter Scope
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#function-name-scope">
    Function Name Scope
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#anonymous-vs-named-functions">
    Anonymous vs. Named Functions
  </a>
<nav aria-label="Anonymous vs. Named Functions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#explicit-or-inferred-names">
    Explicit or Inferred Names?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#missing-names">
    Missing Names?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#who-am-i">
    Who am I?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#names-are-descriptors">
    Names are Descriptors
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arrow-functions">
    Arrow Functions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#iife-variations">
    IIFE Variations
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hoisting-functions-and-variables">
    Hoisting: Functions and Variables
  </a>
<nav aria-label="Hoisting: Functions and Variables" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#function-hoisting">
    Function Hoisting
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#variable-hoisting">
    Variable Hoisting
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-case-for-var">
    The Case for var
  </a>
<nav aria-label="The Case for var" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dont-throw-out-var">
    Don't Throw Out var
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#const-antly-confused">
    const-antly Confused
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#var-and-let">
    var and let
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#whats-the-deal-with-tdz">
    What's the Deal with TDZ?
  </a>
<nav aria-label="What's the Deal with TDZ?" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#where-it-all-started">
    Where It All Started
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#who-let-the-tdz-out">
    Who let the TDZ Out?
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#are-synchronous-callbacks-still-closures">
    Are Synchronous Callbacks Still Closures?
  </a>
<nav aria-label="Are Synchronous Callbacks Still Closures?" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#what-is-a-callback">
    What is a Callback?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#synchronous-callback">
    Synchronous Callback?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#synchronous-closure">
    Synchronous Closure?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#defer-to-closure">
    Defer to Closure
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#classic-module-variations">
    Classic Module Variations
  </a>
<nav aria-label="Classic Module Variations" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#wheres-my-api">
    Where's My API?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#asynchronous-module-definition-amd">
    Asynchronous Module Definition (AMD)
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#universal-modules-umd">
    Universal Modules (UMD)
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/shane0/learning_js/edit/main/docs/know_js/scope-closures/apA.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"></path></svg>
</a>
<a class="md-content__button md-icon" href="https://github.com/shane0/learning_js/raw/main/docs/know_js/scope-closures/apA.md" title="View source of this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"></path></svg>
</a>
<h1 id="appendix-a-exploring-further">Appendix A: Exploring Further<a class="headerlink" href="#appendix-a-exploring-further" title="Permanent link">¶</a></h1>
<p>We will now explore a number of nuances and edges around many of the topics covered in the main text of this book. This appendix is optional, supporting material.</p>
<p>Some people find diving too deeply into the nuanced corner cases and varying opinions creates nothing but noise and distraction—supposedly, developers are better served by sticking to the commonly-tread paths. My approach has been criticized as being impractical and counterproductive. I understand and appreciate that perspective, even if I don't necessarily share it.</p>
<p>I believe it's better to be empowered by knowledge of how things work than to just gloss over details with assumptions and lack of curiosity. Ultimately, you will encounter situations where something bubbles up from a piece you hadn't explored. In other words, you won't get to spend all your time riding on the smooth <em>happy path</em>. Wouldn't you rather be prepared for the inevitable bumps of off-roading?</p>
<p>These discussions will also be more heavily influenced by my opinions than the main text was, so keep that in mind as you consume and consider what is presented. This appendix is a bit like a collection of mini-blog posts that elaborate on various book topics. It's long and deep in the weeds, so take your time and don't rush through everything here.</p>
<h2 id="implied-scopes">Implied Scopes<a class="headerlink" href="#implied-scopes" title="Permanent link">¶</a></h2>
<p>Scopes are sometimes created in non-obvious places. In practice, these implied scopes don't often impact your program behavior, but it's still useful to know they're happening. Keep an eye out for the following surprising scopes:</p>
<ul>
<li>Parameter scope</li>
<li>Function name scope</li>
</ul>
<h3 id="parameter-scope">Parameter Scope<a class="headerlink" href="#parameter-scope" title="Permanent link">¶</a></h3>
<p>The conversation metaphor in Chapter 2 implies that function parameters are basically the same as locally declared variables in the function scope. But that's not always true.</p>
<p>Consider:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1">// outer/global scope: RED(1)</span>
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">getStudentName</span><span class="p">(</span><span class="nx">studentID</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="c1">// function scope: BLUE(2)</span>
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="p">}</span>
</code></pre></div>
<p>Here, <code>studentID</code> is a considered a "simple" parameter, so it does behave as a member of the BLUE(2) function scope. But if we change it to be a non-simple parameter, that's no longer technically the case. Parameter forms considered non-simple include parameters with default values, rest parameters (using <code>...</code>), and destructured parameters.</p>
<p>Consider:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1">// outer/global scope: RED(1)</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">getStudentName</span><span class="p">(</span><span class="cm">/*BLUE(2)*/</span><span class="w"> </span><span class="nx">studentID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="c1">// function scope: GREEN(3)</span>
<a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>
<a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="p">}</span>
</code></pre></div>
<p>Here, the parameter list essentially becomes its own scope, and the function's scope is then nested inside <em>that</em> scope.</p>
<p>Why? What difference does it make? The non-simple parameter forms introduce various corner cases, so the parameter list becomes its own scope to more effectively deal with them.</p>
<p>Consider:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">getStudentName</span><span class="p">(</span><span class="nx">studentID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">maxID</span><span class="p">,</span><span class="w"> </span><span class="nx">maxID</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="p">}</span>
</code></pre></div>
<p>Assuming left-to-right operations, the default <code>= maxID</code> for the <code>studentID</code> parameter requires a <code>maxID</code> to already exist (and to have been initialized). This code produces a TDZ error (Chapter 5). The reason is that <code>maxID</code> is declared in the parameter scope, but it's not yet been initialized because of the order of parameters. If the parameter order is flipped, no TDZ error occurs:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">getStudentName</span><span class="p">(</span><span class="nx">maxID</span><span class="p">,</span><span class="nx">studentID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">maxID</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="p">}</span>
</code></pre></div>
<p>The complication gets even more <em>in the weeds</em> if we introduce a function expression into the default parameter position, which then can create its own closure (Chapter 7) over parameters in this implied parameter scope:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">whatsTheDealHere</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span><span class="nx">defaultID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>
<a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="w"> </span><span class="nx">defaultID</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="p">}</span>
<a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>
<a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="nx">whatsTheDealHere</span><span class="p">(</span><span class="mf">3</span><span class="p">);</span>
<a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="c1">// 5</span>
</code></pre></div>
<p>That snippet probably makes sense, because the <code>defaultID()</code> arrow function closes over the <code>id</code> parameter/variable, which we then re-assign to <code>5</code>. But now let's introduce a shadowing definition of <code>id</code> in the function scope:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">whatsTheDealHere</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span><span class="nx">defaultID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>
<a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="w"> </span><span class="nx">defaultID</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="p">}</span>
<a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>
<a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="nx">whatsTheDealHere</span><span class="p">(</span><span class="mf">3</span><span class="p">);</span>
<a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="c1">// 3</span>
</code></pre></div>
<p>Uh oh! The <code>var id = 5</code> is shadowing the <code>id</code> parameter, but the closure of the <code>defaultID()</code> function is over the parameter, not the shadowing variable in the function body. This proves there's a scope bubble around the parameter list.</p>
<p>But it gets even crazier than that!</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">whatsTheDealHere</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span><span class="nx">defaultID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">id</span><span class="p">;</span>
<a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>
<a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`local variable 'id': </span><span class="si">${</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
<a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">        </span><span class="sb">`parameter 'id' (closure): </span><span class="si">${</span><span class="w"> </span><span class="nx">defaultID</span><span class="p">()</span><span class="w"> </span><span class="si">}</span><span class="sb">`</span>
<a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">    </span><span class="p">);</span>
<a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>
<a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"reassigning 'id' to 5"</span><span class="p">);</span>
<a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">    </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>
<a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a>
<a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`local variable 'id': </span><span class="si">${</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
<a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">        </span><span class="sb">`parameter 'id' (closure): </span><span class="si">${</span><span class="w"> </span><span class="nx">defaultID</span><span class="p">()</span><span class="w"> </span><span class="si">}</span><span class="sb">`</span>
<a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="w">    </span><span class="p">);</span>
<a href="#__codelineno-6-16" id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="p">}</span>
<a href="#__codelineno-6-17" id="__codelineno-6-17" name="__codelineno-6-17"></a>
<a href="#__codelineno-6-18" id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="nx">whatsTheDealHere</span><span class="p">(</span><span class="mf">3</span><span class="p">);</span>
<a href="#__codelineno-6-19" id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="c1">// local variable 'id': 3   &lt;--- Huh!? Weird!</span>
<a href="#__codelineno-6-20" id="__codelineno-6-20" name="__codelineno-6-20"></a><span class="c1">// parameter 'id' (closure): 3</span>
<a href="#__codelineno-6-21" id="__codelineno-6-21" name="__codelineno-6-21"></a><span class="c1">// reassigning 'id' to 5</span>
<a href="#__codelineno-6-22" id="__codelineno-6-22" name="__codelineno-6-22"></a><span class="c1">// local variable 'id': 5</span>
<a href="#__codelineno-6-23" id="__codelineno-6-23" name="__codelineno-6-23"></a><span class="c1">// parameter 'id' (closure): 3</span>
</code></pre></div>
<p>The strange bit here is the first console message. At that moment, the shadowing <code>id</code> local variable has just been <code>var id</code> declared, which Chapter 5 asserts is typically auto-initialized to <code>undefined</code> at the top of its scope. Why doesn't it print <code>undefined</code>?</p>
<p>In this specific corner case (for legacy compat reasons), JS doesn't auto-initialize <code>id</code> to <code>undefined</code>, but rather to the value of the <code>id</code> parameter (<code>3</code>)!</p>
<p>Though the two <code>id</code>s look at that moment like they're one variable, they're actually still separate (and in separate scopes). The <code>id = 5</code> assignment makes the divergence observable, where the <code>id</code> parameter stays <code>3</code> and the local variable becomes <code>5</code>.</p>
<p>My advice to avoid getting bitten by these weird nuances:</p>
<ul>
<li>
<p>Never shadow parameters with local variables</p>
</li>
<li>
<p>Avoid using a default parameter function that closes over any of the parameters</p>
</li>
</ul>
<p>At least now you're aware and can be careful about the fact that the parameter list is its own scope if any of the parameters are non-simple.</p>
<h3 id="function-name-scope">Function Name Scope<a class="headerlink" href="#function-name-scope" title="Permanent link">¶</a></h3>
<p>In the "Function Name Scope" section in Chapter 3, I asserted that the name of a function expression is added to the function's own scope. Recall:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kd">var</span><span class="w"> </span><span class="nx">askQuestion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ofTheTeacher</span><span class="p">(){</span>
<a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="p">};</span>
</code></pre></div>
<p>It's true that <code>ofTheTeacher</code> is not added to the enclosing scope (where <code>askQuestion</code> is declared), but it's also not <em>just</em> added to the scope of the function, the way you're likely assuming. It's another strange corner case of implied scope.</p>
<p>The name identifier of a function expression is in its own implied scope, nested between the outer enclosing scope and the main inner function scope.</p>
<p>If <code>ofTheTeacher</code> was in the function's scope, we'd expect an error here:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kd">var</span><span class="w"> </span><span class="nx">askQuestion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ofTheTeacher</span><span class="p">(){</span>
<a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">    </span><span class="c1">// why is this not a duplicate declaration error?</span>
<a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">ofTheTeacher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Confused, yet?"</span><span class="p">;</span>
<a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="p">};</span>
</code></pre></div>
<p>The <code>let</code> declaration form does not allow re-declaration (see Chapter 5). But this is perfectly legal shadowing, not re-declaration, because the two <code>ofTheTeacher</code> identifiers are in separate scopes.</p>
<p>You'll rarely run into any case where the scope of a function's name identifier matters. But again, it's good to know how these mechanisms actually work. To avoid being bitten, never shadow function name identifiers.</p>
<h2 id="anonymous-vs-named-functions">Anonymous vs. Named Functions<a class="headerlink" href="#anonymous-vs-named-functions" title="Permanent link">¶</a></h2>
<p>As discussed in Chapter 3, functions can be expressed either in named or anonymous form. It's vastly more common to use the anonymous form, but is that a good idea?</p>
<p>As you contemplate naming your functions, consider:</p>
<ul>
<li>Name inference is incomplete</li>
<li>Lexical names allow self-reference</li>
<li>Names are useful descriptions</li>
<li>Arrow functions have no LEXICAL names</li>
<li>IIFEs also need names</li>
</ul>
<h3 id="explicit-or-inferred-names">Explicit or Inferred Names?<a class="headerlink" href="#explicit-or-inferred-names" title="Permanent link">¶</a></h3>
<p>Every function in your program has a purpose. If it doesn't have a purpose, take it out, because you're just wasting space. If it <em>does</em> have a purpose, there <em>is</em> a name for that purpose.</p>
<p>So far many readers likely agree with me. But does that mean we should always put that name into the code? Here's where I'll raise more than a few eyebrows. I say, unequivocally, yes!</p>
<p>First of all, "anonymous" showing up in stack traces is just not all that helpful to debugging:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="nx">btn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
<a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">    </span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
<a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">        </span><span class="p">[</span><span class="s2">"a"</span><span class="p">,</span><span class="mf">42</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">){</span>
<a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">());</span>
<a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">        </span><span class="p">});</span>
<a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">    </span><span class="p">},</span><span class="mf">100</span><span class="p">);</span>
<a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="p">});</span>
<a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="c1">// Uncaught TypeError: v.toUpperCase is not a function</span>
<a href="#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="c1">//     at myProgram.js:4</span>
<a href="#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="c1">//     at Array.map (&lt;anonymous&gt;)</span>
<a href="#__codelineno-9-11" id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="c1">//     at myProgram.js:3</span>
</code></pre></div>
<p>Ugh. Compare to what is reported if I give the functions names:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="nx">btn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span><span class="kd">function</span><span class="w"> </span><span class="nx">onClick</span><span class="p">(){</span>
<a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">    </span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="nx">waitAMoment</span><span class="p">(){</span>
<a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">        </span><span class="p">[</span><span class="s2">"a"</span><span class="p">,</span><span class="mf">42</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="nx">allUpper</span><span class="p">(</span><span class="nx">v</span><span class="p">){</span>
<a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">());</span>
<a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">        </span><span class="p">});</span>
<a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">    </span><span class="p">},</span><span class="mf">100</span><span class="p">);</span>
<a href="#__codelineno-10-7" id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="p">});</span>
<a href="#__codelineno-10-8" id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="c1">// Uncaught TypeError: v.toUpperCase is not a function</span>
<a href="#__codelineno-10-9" id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="c1">//     at allUpper (myProgram.js:4)</span>
<a href="#__codelineno-10-10" id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="c1">//     at Array.map (&lt;anonymous&gt;)</span>
<a href="#__codelineno-10-11" id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="c1">//     at waitAMoment (myProgram.js:3)</span>
</code></pre></div>
<p>See how <code>waitAMoment</code> and <code>allUpper</code> names appear and give the stack trace more useful information/context for debugging? The program is more debuggable if we use reasonable names for all our functions.</p>
<table>
<thead>
<tr>
<th align="left">NOTE:</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">The unfortunate "&lt;anonymous&gt;" that still shows up refers to the fact that the implementation of <code>Array.map(..)</code> isn't present in our program, but is built into the JS engine. It's not from any confusion our program introduces with readability shortcuts.</td>
</tr>
</tbody>
</table>
<p>By the way, let's make sure we're on the same page about what a named function is:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">thisIsNamed</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="p">}</span>
<a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a>
<a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="nx">ajax</span><span class="p">(</span><span class="s2">"some.url"</span><span class="p">,</span><span class="kd">function</span><span class="w"> </span><span class="nx">thisIsAlsoNamed</span><span class="p">(){</span>
<a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">   </span><span class="c1">// ..</span>
<a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="p">});</span>
<a href="#__codelineno-11-8" id="__codelineno-11-8" name="__codelineno-11-8"></a>
<a href="#__codelineno-11-9" id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="kd">var</span><span class="w"> </span><span class="nx">notNamed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<a href="#__codelineno-11-10" id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-11-11" id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="p">};</span>
<a href="#__codelineno-11-12" id="__codelineno-11-12" name="__codelineno-11-12"></a>
<a href="#__codelineno-11-13" id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="nx">makeRequest</span><span class="p">({</span>
<a href="#__codelineno-11-14" id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="w">    </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="mf">42</span><span class="p">,</span>
<a href="#__codelineno-11-15" id="__codelineno-11-15" name="__codelineno-11-15"></a><span class="w">    </span><span class="nx">cb</span><span class="w"> </span><span class="cm">/* also not a name */</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<a href="#__codelineno-11-16" id="__codelineno-11-16" name="__codelineno-11-16"></a><span class="w">        </span><span class="c1">// ..</span>
<a href="#__codelineno-11-17" id="__codelineno-11-17" name="__codelineno-11-17"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-11-18" id="__codelineno-11-18" name="__codelineno-11-18"></a><span class="p">});</span>
<a href="#__codelineno-11-19" id="__codelineno-11-19" name="__codelineno-11-19"></a>
<a href="#__codelineno-11-20" id="__codelineno-11-20" name="__codelineno-11-20"></a><span class="kd">var</span><span class="w"> </span><span class="nx">stillNotNamed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">butThisIs</span><span class="p">(){</span>
<a href="#__codelineno-11-21" id="__codelineno-11-21" name="__codelineno-11-21"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-11-22" id="__codelineno-11-22" name="__codelineno-11-22"></a><span class="p">};</span>
</code></pre></div>
<p>"But wait!", you say. Some of those <em>are</em> named, right!?</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kd">var</span><span class="w"> </span><span class="nx">notNamed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="p">};</span>
<a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a>
<a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="kd">var</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">    </span><span class="nx">cb</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">        </span><span class="c1">// ..</span>
<a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-12-9" id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="p">};</span>
<a href="#__codelineno-12-10" id="__codelineno-12-10" name="__codelineno-12-10"></a>
<a href="#__codelineno-12-11" id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="nx">notNamed</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
<a href="#__codelineno-12-12" id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="c1">// notNamed</span>
<a href="#__codelineno-12-13" id="__codelineno-12-13" name="__codelineno-12-13"></a>
<a href="#__codelineno-12-14" id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="nx">config</span><span class="p">.</span><span class="nx">cb</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
<a href="#__codelineno-12-15" id="__codelineno-12-15" name="__codelineno-12-15"></a><span class="c1">// cb</span>
</code></pre></div>
<p>These are referred to as <em>inferred</em> names. Inferred names are fine, but they don't really address the full concern I'm discussing.</p>
<h3 id="missing-names">Missing Names?<a class="headerlink" href="#missing-names" title="Permanent link">¶</a></h3>
<p>Yes, these inferred names might show up in stack traces, which is definitely better than "anonymous" showing up. But...</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">ajax</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="nx">cb</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">cb</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="p">}</span>
<a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a>
<a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="nx">ajax</span><span class="p">(</span><span class="s2">"some.url"</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
<a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="p">});</span>
<a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="c1">// ""</span>
</code></pre></div>
<p>Oops. Anonymous <code>function</code> expressions passed as callbacks are incapable of receiving an inferred name, so <code>cb.name</code> holds just the empty string <code>""</code>. The vast majority of all <code>function</code> expressions, especially anonymous ones, are used as callback arguments; none of these get a name. So relying on name inference is incomplete, at best.</p>
<p>And it's not just callbacks that fall short with inference:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kd">var</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a>
<a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="nx">config</span><span class="p">.</span><span class="nx">cb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(){</span>
<a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="p">};</span>
<a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a>
<a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="nx">config</span><span class="p">.</span><span class="nx">cb</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
<a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="c1">// ""</span>
<a href="#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a>
<a href="#__codelineno-14-10" id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="kd">var</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nx">noName</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="kd">function</span><span class="p">(){}</span><span class="w"> </span><span class="p">];</span>
<a href="#__codelineno-14-11" id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="nx">noName</span><span class="p">.</span><span class="nx">name</span>
<a href="#__codelineno-14-12" id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="c1">// ""</span>
</code></pre></div>
<p>Any assignment of a <code>function</code> expression that's not a <em>simple assignment</em> will also fail name inferencing. So, in other words, unless you're careful and intentional about it, essentially almost all anonymous <code>function</code> expressions in your program will in fact have no name at all.</p>
<p>Name inference is just... not enough.</p>
<p>And even if a <code>function</code> expression <em>does</em> get an inferred name, that still doesn't count as being a full named function.</p>
<h3 id="who-am-i">Who am I?<a class="headerlink" href="#who-am-i" title="Permanent link">¶</a></h3>
<p>Without a LEXICAL name identifier, the function has no internal way to refer to itself. Self-reference is important for things like recursion and event handling:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="c1">// broken</span>
<a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="nx">runOperation</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">num</span><span class="p">){</span>
<a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">num</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">num</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">oopsNoNameToCall</span><span class="p">(</span><span class="nx">num</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="p">});</span>
<a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a>
<a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="c1">// also broken</span>
<a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="nx">btn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
<a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"should only respond to one click!"</span><span class="p">);</span>
<a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">   </span><span class="nx">btn</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span><span class="nx">oopsNoNameHere</span><span class="p">);</span>
<a href="#__codelineno-15-11" id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="p">});</span>
</code></pre></div>
<p>Leaving off the LEXICAL name from your callback makes it harder to reliably self-reference the function. You <em>could</em> declare a variable in an enclosing scope that references the function, but this variable is <em>controlled</em> by that enclosing scope—it could be re-assigned, etc.—so it's not as reliable as the function having its own internal self-reference.</p>
<h3 id="names-are-descriptors">Names are Descriptors<a class="headerlink" href="#names-are-descriptors" title="Permanent link">¶</a></h3>
<p>Lastly, and I think most importantly of all, leaving off a name from a function makes it harder for the reader to tell what the function's purpose is, at a quick glance. They have to read more of the code, including the code inside the function, and the surrounding code outside the function, to figure it out.</p>
<p>Consider:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="p">[</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="p">].</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">){</span>
<a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">v</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="p">});</span>
<a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="c1">// [ 1, 3, 5 ]</span>
<a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a>
<a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="p">[</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="p">].</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="nx">keepOnlyOdds</span><span class="p">(</span><span class="nx">v</span><span class="p">){</span>
<a href="#__codelineno-16-7" id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">v</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<a href="#__codelineno-16-8" id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="p">});</span>
<a href="#__codelineno-16-9" id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="c1">// [ 1, 3, 5 ]</span>
</code></pre></div>
<p>There's just no reasonable argument to be made that <strong>omitting</strong> the name <code>keepOnlyOdds</code> from the first callback more effectively communicates to the reader the purpose of this callback. You saved 13 characters, but lost important readability information. The name <code>keepOnlyOdds</code> very clearly tells the reader, at a quick first glance, what's happening.</p>
<p>The JS engine doesn't care about the name. But human readers of your code absolutely do.</p>
<p>Can the reader look at <code>v % 2 == 1</code> and figure out what it's doing? Sure. But they have to infer the purpose (and name) by mentally executing the code. Even a brief pause to do so slows down reading of the code. A good descriptive name makes this process almost effortless and instant.</p>
<p>Think of it this way: how many times does the author of this code need to figure out the purpose of a function before adding the name to the code? About once. Maybe two or three times if they need to adjust the name. But how many times will readers of this code have to figure out the name/purpose? Every single time this line is ever read. Hundreds of times? Thousands? More?</p>
<p>No matter the length or complexity of the function, my assertion is, the author should figure out a good descriptive name and add it to the code. Even the one-liner functions in <code>map(..)</code> and <code>then(..)</code> statements should be named:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="nx">lookupTheRecords</span><span class="p">(</span><span class="nx">someData</span><span class="p">)</span>
<a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="nx">extractSalesRecords</span><span class="p">(</span><span class="nx">resp</span><span class="p">){</span>
<a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="nx">resp</span><span class="p">.</span><span class="nx">allSales</span><span class="p">;</span>
<a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="p">})</span>
<a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">storeRecords</span><span class="p">);</span>
</code></pre></div>
<p>The name <code>extractSalesRecords</code> tells the reader the purpose of this <code>then(..)</code> handler <em>better</em> than just inferring that purpose from mentally executing <code>return resp.allSales</code>.</p>
<p>The only excuse for not including a name on a function is either laziness (don't want to type a few extra characters) or uncreativity (can't come up with a good name). If you can't figure out a good name, you likely don't understand the function and its purpose yet. The function is perhaps poorly designed, or it does too many things, and should be re-worked. Once you have a well-designed, single-purpose function, its proper name should become evident.</p>
<p>Here's a trick I use: while first writing a function, if I don't fully understand its purpose and can't think of a good name to use, I just use <code>TODO</code> as the name. That way, later when reviewing my code, I'm likely to find those name placeholders, and I'm more inclined (and more prepared!) to go back and figure out a better name, rather than just leave it as <code>TODO</code>.</p>
<p>All functions need names. Every single one. No exceptions. Any name you omit is making the program harder to read, harder to debug, harder to extend and maintain later.</p>
<h3 id="arrow-functions">Arrow Functions<a class="headerlink" href="#arrow-functions" title="Permanent link">¶</a></h3>
<p>Arrow functions are <strong>always</strong> anonymous, even if (rarely) they're used in a way that gives them an inferred name. I just spent several pages explaining why anonymous functions are a bad idea, so you can probably guess what I think about arrow functions.</p>
<p>Don't use them as a general replacement for regular functions. They're more concise, yes, but that brevity comes at the cost of omitting key visual delimiters that help our brains quickly parse out what we're reading. And, to the point of this discussion, they're anonymous, which makes them worse for readability from that angle as well.</p>
<p>Arrow functions have a purpose, but that purpose is not to save keystrokes. Arrow functions have <em>LEXICAL this</em> behavior, which is somewhat beyond the bounds of our discussion in this book.</p>
<p>Briefly: arrow functions don't define a <code>this</code> identifier keyword at all. If you use a <code>this</code> inside an arrow function, it behaves exactly as any other variable reference, which is that the scope chain is consulted to find a function scope (non-arrow function) where it <em>is</em> defined, and to use that one.</p>
<p>In other words, arrow functions treat <code>this</code> like any other LEXICAL variable.</p>
<p>If you're used to hacks like <code>var self = this</code>, or if you prefer to call <code>.bind(this)</code> on inner <code>function</code> expressions, just to force them to inherit a <code>this</code> from an outer function like it was a LEXICAL variable, then <code>=&gt;</code> arrow functions are absolutely the better option. They're designed specifically to fix that problem.</p>
<p>So, in the rare cases you need <em>LEXICAL this</em>, use an arrow function. It's the best tool for that job. But just be aware that in doing so, you're accepting the downsides of an anonymous function. You should expend additional effort to mitigate the readability <em>cost</em>, such as more descriptive variable names and code comments.</p>
<h3 id="iife-variations">IIFE Variations<a class="headerlink" href="#iife-variations" title="Permanent link">¶</a></h3>
<p>All functions should have names. I said that a few times, right!? That includes IIFEs.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
<a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">    </span><span class="c1">// don't do this!</span>
<a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="p">})();</span>
<a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a>
<a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="nx">doThisInstead</span><span class="p">(){</span>
<a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-18-7" id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="p">})();</span>
</code></pre></div>
<p>How do we come up with a name for an IIFE? Identify what the IIFE is there for. Why do you need a scope in that spot? Are you hiding a cache variable for student records?</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="kd">var</span><span class="w"> </span><span class="nx">getStudents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="nx">StoreStudentRecords</span><span class="p">(){</span>
<a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">studentRecords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a>
<a href="#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getStudents</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-19-5" id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">        </span><span class="c1">// ..</span>
<a href="#__codelineno-19-6" id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-19-7" id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="p">})();</span>
</code></pre></div>
<p>I named the IIFE <code>StoreStudentRecords</code> because that's what it's doing: storing student records. Every IIFE should have a name. No exceptions.</p>
<p>IIFEs are typically defined by placing <code>( .. )</code> around the <code>function</code> expression, as shown in those previous snippets. But that's not the only way to define an IIFE. Technically, the only reason we're using that first surrounding set of <code>( .. )</code> is just so the <code>function</code> keyword isn't in a position to qualify as a <code>function</code> declaration to the JS parser. But there are other syntactic ways to avoid being parsed as a declaration:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="o">!</span><span class="kd">function</span><span class="w"> </span><span class="nx">thisIsAnIIFE</span><span class="p">(){</span>
<a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="p">}();</span>
<a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a>
<a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="o">+</span><span class="kd">function</span><span class="w"> </span><span class="nx">soIsThisOne</span><span class="p">(){</span>
<a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="p">}();</span>
<a href="#__codelineno-20-8" id="__codelineno-20-8" name="__codelineno-20-8"></a>
<a href="#__codelineno-20-9" id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="o">~</span><span class="kd">function</span><span class="w"> </span><span class="nx">andThisOneToo</span><span class="p">(){</span>
<a href="#__codelineno-20-10" id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-20-11" id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="p">}();</span>
</code></pre></div>
<p>The <code>!</code>, <code>+</code>, <code>~</code>, and several other unary operators (operators with one operand) can all be placed in front of <code>function</code> to turn it into an expression. Then the final <code>()</code> call is valid, which makes it an IIFE.</p>
<p>I actually kind of like using the <code>void</code> unary operator when defining a standalone IIFE:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="ow">void</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">yepItsAnIIFE</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="p">}();</span>
</code></pre></div>
<p>The benefit of <code>void</code> is, it clearly communicates at the beginning of the function that this IIFE won't be returning any value.</p>
<p>However you define your IIFEs, show them some love by giving them names.</p>
<h2 id="hoisting-functions-and-variables">Hoisting: Functions and Variables<a class="headerlink" href="#hoisting-functions-and-variables" title="Permanent link">¶</a></h2>
<p>Chapter 5 articulated both <em>function hoisting</em> and <em>variable hoisting</em>. Since hoisting is often cited as mistake in the design of JS, I wanted to briefly explore why both these forms of hoisting <em>can</em> be beneficial and should still be considered.</p>
<p>Give hoisting a deeper level of consideration by considering the merits of:</p>
<ul>
<li>Executable code first, function declarations last</li>
<li>Semantic placement of variable declarations</li>
</ul>
<h3 id="function-hoisting">Function Hoisting<a class="headerlink" href="#function-hoisting" title="Permanent link">¶</a></h3>
<p>To review, this program works because of <em>function hoisting</em>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="nx">getStudents</span><span class="p">();</span>
<a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a>
<a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="c1">// ..</span>
<a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a>
<a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">getStudents</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-22-6" id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-22-7" id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="p">}</span>
</code></pre></div>
<p>The <code>function</code> declaration is hoisted during compilation, which means that <code>getStudents</code> is an identifier declared for the entire scope. Additionally, the <code>getStudents</code> identifier is auto-initialized with the function reference, again at the beginning of the scope.</p>
<p>Why is this useful? The reason I prefer to take advantage of <em>function hoisting</em> is that it puts the <em>executable</em> code in any scope at the top, and any further declarations (functions) below. This means it's easier to find the code that will run in any given area, rather than having to scroll and scroll, hoping to find a trailing <code>}</code> marking the end of a scope/function somewhere.</p>
<p>I take advantage of this inverse positioning in all levels of scope:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="nx">getStudents</span><span class="p">();</span>
<a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a>
<a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="c1">// *************</span>
<a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a>
<a href="#__codelineno-23-5" id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">getStudents</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-23-6" id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">whatever</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">doSomething</span><span class="p">();</span>
<a href="#__codelineno-23-7" id="__codelineno-23-7" name="__codelineno-23-7"></a>
<a href="#__codelineno-23-8" id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="w">    </span><span class="c1">// other stuff</span>
<a href="#__codelineno-23-9" id="__codelineno-23-9" name="__codelineno-23-9"></a>
<a href="#__codelineno-23-10" id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">whatever</span><span class="p">;</span>
<a href="#__codelineno-23-11" id="__codelineno-23-11" name="__codelineno-23-11"></a>
<a href="#__codelineno-23-12" id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="w">    </span><span class="c1">// *************</span>
<a href="#__codelineno-23-13" id="__codelineno-23-13" name="__codelineno-23-13"></a>
<a href="#__codelineno-23-14" id="__codelineno-23-14" name="__codelineno-23-14"></a><span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">doSomething</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-23-15" id="__codelineno-23-15" name="__codelineno-23-15"></a><span class="w">        </span><span class="c1">// ..</span>
<a href="#__codelineno-23-16" id="__codelineno-23-16" name="__codelineno-23-16"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-23-17" id="__codelineno-23-17" name="__codelineno-23-17"></a><span class="p">}</span>
</code></pre></div>
<p>When I first open a file like that, the very first line is executable code that kicks off its behavior. That's very easy to spot! Then, if I ever need to go find and inspect <code>getStudents()</code>, I like that its first line is also executable code. Only if I need to see the details of <code>doSomething()</code> do I go and find its definition down below.</p>
<p>In other words, I think <em>function hoisting</em> makes code more readable through a flowing, progressive reading order, from top to bottom.</p>
<h3 id="variable-hoisting">Variable Hoisting<a class="headerlink" href="#variable-hoisting" title="Permanent link">¶</a></h3>
<p>What about <em>variable hoisting</em>?</p>
<p>Even though <code>let</code> and <code>const</code> hoist, you cannot use those variables in their TDZ (see Chapter 5). So, the following discussion only applies to <code>var</code> declarations. Before I continue, I'll admit: in almost all cases, I completely agree that <em>variable hoisting</em> is a bad idea:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="nx">pleaseDontDoThis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"bad idea"</span><span class="p">;</span>
<a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a>
<a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="c1">// much later</span>
<a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="kd">var</span><span class="w"> </span><span class="nx">pleaseDontDoThis</span><span class="p">;</span>
</code></pre></div>
<p>While that kind of inverted ordering was helpful for <em>function hoisting</em>, here I think it usually makes code harder to reason about.</p>
<p>But there's one exception that I've found, somewhat rarely, in my own coding. It has to do with where I place my <code>var</code> declarations inside a CommonJS module definition.</p>
<p>Here's how I typically structure my module definitions in Node:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="c1">// dependencies</span>
<a href="#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="kd">var</span><span class="w"> </span><span class="nx">aModuleINeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"very-helpful"</span><span class="p">);</span>
<a href="#__codelineno-25-3" id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="kd">var</span><span class="w"> </span><span class="nx">anotherModule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"kinda-helpful"</span><span class="p">);</span>
<a href="#__codelineno-25-4" id="__codelineno-25-4" name="__codelineno-25-4"></a>
<a href="#__codelineno-25-5" id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="c1">// public API</span>
<a href="#__codelineno-25-6" id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="kd">var</span><span class="w"> </span><span class="nx">publicAPI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,{</span>
<a href="#__codelineno-25-7" id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="w">    </span><span class="nx">getStudents</span><span class="p">,</span>
<a href="#__codelineno-25-8" id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="w">    </span><span class="nx">addStudents</span><span class="p">,</span>
<a href="#__codelineno-25-9" id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-25-10" id="__codelineno-25-10" name="__codelineno-25-10"></a><span class="p">});</span>
<a href="#__codelineno-25-11" id="__codelineno-25-11" name="__codelineno-25-11"></a>
<a href="#__codelineno-25-12" id="__codelineno-25-12" name="__codelineno-25-12"></a><span class="c1">// ********************************</span>
<a href="#__codelineno-25-13" id="__codelineno-25-13" name="__codelineno-25-13"></a><span class="c1">// private implementation</span>
<a href="#__codelineno-25-14" id="__codelineno-25-14" name="__codelineno-25-14"></a>
<a href="#__codelineno-25-15" id="__codelineno-25-15" name="__codelineno-25-15"></a><span class="kd">var</span><span class="w"> </span><span class="nx">cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">};</span>
<a href="#__codelineno-25-16" id="__codelineno-25-16" name="__codelineno-25-16"></a><span class="kd">var</span><span class="w"> </span><span class="nx">otherData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">];</span>
<a href="#__codelineno-25-17" id="__codelineno-25-17" name="__codelineno-25-17"></a>
<a href="#__codelineno-25-18" id="__codelineno-25-18" name="__codelineno-25-18"></a><span class="kd">function</span><span class="w"> </span><span class="nx">getStudents</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-25-19" id="__codelineno-25-19" name="__codelineno-25-19"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-25-20" id="__codelineno-25-20" name="__codelineno-25-20"></a><span class="p">}</span>
<a href="#__codelineno-25-21" id="__codelineno-25-21" name="__codelineno-25-21"></a>
<a href="#__codelineno-25-22" id="__codelineno-25-22" name="__codelineno-25-22"></a><span class="kd">function</span><span class="w"> </span><span class="nx">addStudents</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-25-23" id="__codelineno-25-23" name="__codelineno-25-23"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-25-24" id="__codelineno-25-24" name="__codelineno-25-24"></a><span class="p">}</span>
</code></pre></div>
<p>Notice how the <code>cache</code> and <code>otherData</code> variables are in the "private" section of the module layout? That's because I don't plan to expose them publicly. So I organize the module so they're located alongside the other hidden implementation details of the module.</p>
<p>But I've had a few rare cases where I needed the assignments of those values to happen <em>above</em>, before I declare the exported public API of the module. For instance:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="c1">// public API</span>
<a href="#__codelineno-26-2" id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="kd">var</span><span class="w"> </span><span class="nx">publicAPI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,{</span>
<a href="#__codelineno-26-3" id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="w">    </span><span class="nx">getStudents</span><span class="p">,</span>
<a href="#__codelineno-26-4" id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">    </span><span class="nx">addStudents</span><span class="p">,</span>
<a href="#__codelineno-26-5" id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="w">    </span><span class="nx">refreshData</span><span class="o">:</span><span class="w"> </span><span class="nx">refreshData</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">cache</span><span class="p">)</span>
<a href="#__codelineno-26-6" id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="p">});</span>
</code></pre></div>
<p>I need the <code>cache</code> variable to have already been assigned a value, because that value is used in the initialization of the public API (the <code>.bind(..)</code> partial-application).</p>
<p>Should I just move the <code>var cache = { .. }</code> up to the top, above this public API initialization? Well, perhaps. But now it's less obvious that <code>var cache</code> is a <em>private</em> implementation detail. Here's the compromise I've (somewhat rarely) used:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="nx">cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span><span class="w">   </span><span class="c1">// used here, but declared below</span>
<a href="#__codelineno-27-2" id="__codelineno-27-2" name="__codelineno-27-2"></a>
<a href="#__codelineno-27-3" id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="c1">// public API</span>
<a href="#__codelineno-27-4" id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="kd">var</span><span class="w"> </span><span class="nx">publicAPI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">,{</span>
<a href="#__codelineno-27-5" id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="w">    </span><span class="nx">getStudents</span><span class="p">,</span>
<a href="#__codelineno-27-6" id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="w">    </span><span class="nx">addStudents</span><span class="p">,</span>
<a href="#__codelineno-27-7" id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="w">    </span><span class="nx">refreshData</span><span class="o">:</span><span class="w"> </span><span class="nx">refreshData</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">cache</span><span class="p">)</span>
<a href="#__codelineno-27-8" id="__codelineno-27-8" name="__codelineno-27-8"></a><span class="p">});</span>
<a href="#__codelineno-27-9" id="__codelineno-27-9" name="__codelineno-27-9"></a>
<a href="#__codelineno-27-10" id="__codelineno-27-10" name="__codelineno-27-10"></a><span class="c1">// ********************************</span>
<a href="#__codelineno-27-11" id="__codelineno-27-11" name="__codelineno-27-11"></a><span class="c1">// private implementation</span>
<a href="#__codelineno-27-12" id="__codelineno-27-12" name="__codelineno-27-12"></a>
<a href="#__codelineno-27-13" id="__codelineno-27-13" name="__codelineno-27-13"></a><span class="kd">var</span><span class="w"> </span><span class="nx">cache</span><span class="w"> </span><span class="cm">/* = {}*/</span><span class="p">;</span>
</code></pre></div>
<p>See the <em>variable hoisting</em>? I've declared the <code>cache</code> down where it belongs, logically, but in this rare case I've used it earlier up above, in the area where its initialization is needed. I even left a hint at the value that's assigned to <code>cache</code> in a code comment.</p>
<p>That's literally the only case I've ever found for leveraging <em>variable hoisting</em> to assign a variable earlier in a scope than its declaration. But I think it's a reasonable exception to employ with caution.</p>
<h2 id="the-case-for-var">The Case for <code>var</code><a class="headerlink" href="#the-case-for-var" title="Permanent link">¶</a></h2>
<p>Speaking of <em>variable hoisting</em>, let's have some real talk for a bit about <code>var</code>, a favorite villain devs love to blame for many of the woes of JS development. In Chapter 5, we explored <code>let</code>/<code>const</code> and promised we'd revisit where <code>var</code> falls in the whole mix.</p>
<p>As I lay out the case, don't miss:</p>
<ul>
<li><code>var</code> was never broken</li>
<li><code>let</code> is your friend</li>
<li><code>const</code> has limited utility</li>
<li>The best of both worlds: <code>var</code> <em>and</em> <code>let</code></li>
</ul>
<h3 id="dont-throw-out-var">Don't Throw Out <code>var</code><a class="headerlink" href="#dont-throw-out-var" title="Permanent link">¶</a></h3>
<p><code>var</code> is fine, and works just fine. It's been around for 25 years, and it'll be around and useful and functional for another 25 years or more. Claims that <code>var</code> is broken, deprecated, outdated, dangerous, or ill-designed are bogus bandwagoning.</p>
<p>Does that mean <code>var</code> is the right declarator for every single declaration in your program? Certainly not. But it still has its place in your programs. Refusing to use it because someone on the team chose an aggressive linter opinion that chokes on <code>var</code> is cutting off your nose to spite your face.</p>
<p>OK, now that I've got you really riled up, let me try to explain my position.</p>
<p>For the record, I'm a fan of <code>let</code>, for block-scoped declarations. I really dislike TDZ and I think that was a mistake. But <code>let</code> itself is great. I use it often. In fact, I probably use it as much or more than I use <code>var</code>.</p>
<h3 id="const-antly-confused"><code>const</code>-antly Confused<a class="headerlink" href="#const-antly-confused" title="Permanent link">¶</a></h3>
<p><code>const</code> on the other hand, I don't use as often. I'm not going to dig into all the reasons why, but it comes down to <code>const</code> not <em>carrying its own weight</em>. That is, while there's a tiny bit of benefit of <code>const</code> in some cases, that benefit is outweighed by the long history of troubles around <code>const</code> confusion in a variety of languages, long before it ever showed up in JS.</p>
<p><code>const</code> pretends to create values that can't be mutated—a misconception that's extremely common in developer communities across many languages—whereas what it really does is prevent re-assignment.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">studentIDs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mf">14</span><span class="p">,</span><span class="w"> </span><span class="mf">73</span><span class="p">,</span><span class="w"> </span><span class="mf">112</span><span class="w"> </span><span class="p">];</span>
<a href="#__codelineno-28-2" id="__codelineno-28-2" name="__codelineno-28-2"></a>
<a href="#__codelineno-28-3" id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="c1">// later</span>
<a href="#__codelineno-28-4" id="__codelineno-28-4" name="__codelineno-28-4"></a>
<a href="#__codelineno-28-5" id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="nx">studentIDs</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mf">6</span><span class="p">);</span><span class="w">   </span><span class="c1">// whoa, wait... what!?</span>
</code></pre></div>
<p>Using a <code>const</code> with a mutable value (like an array or object) is asking for a future developer (or reader of your code) to fall into the trap you set, which was that they either didn't know, or sorta forgot, that <em>value immutability</em> isn't at all the same thing as <em>assignment immutability</em>.</p>
<p>I just don't think we should set those traps. The only time I ever use <code>const</code> is when I'm assigning an already-immutable value (like <code>42</code> or <code>"Hello, friends!"</code>), and when it's clearly a "constant" in the sense of being a named placeholder for a literal value, for semantic purposes. That's what <code>const</code> is best used for. That's pretty rare in my code, though.</p>
<p>If variable re-assignment were a big deal, then <code>const</code> would be more useful. But variable re-assignment just isn't that big of a deal in terms of causing bugs. There's a long list of things that lead to bugs in programs, but "accidental re-assignment" is way, way down that list.</p>
<p>Combine that with the fact that <code>const</code> (and <code>let</code>) are supposed to be used in blocks, and blocks are supposed to be short, and you have a really small area of your code where a <code>const</code> declaration is even applicable. A <code>const</code> on line 1 of your ten-line block only tells you something about the next nine lines. And the thing it tells you is already obvious by glancing down at those nine lines: the variable is never on the left-hand side of an <code>=</code>; it's not re-assigned.</p>
<p>That's it, that's all <code>const</code> really does. Other than that, it's not very useful. Stacked up against the significant confusion of value vs. assignment immutability, <code>const</code> loses a lot of its luster.</p>
<p>A <code>let</code> (or <code>var</code>!) that's never re-assigned is already behaviorally a "constant", even though it doesn't have the compiler guarantee. That's good enough in most cases.</p>
<h3 id="var-and-let"><code>var</code> <em>and</em> <code>let</code><a class="headerlink" href="#var-and-let" title="Permanent link">¶</a></h3>
<p>In my mind, <code>const</code> is pretty rarely useful, so this is only two-horse race between <code>let</code> and <code>var</code>. But it's not really a race either, because there doesn't have to be just one winner. They can both win... different races.</p>
<p>The fact is, you should be using both <code>var</code> and <code>let</code> in your programs. They are not interchangeable: you shouldn't use <code>var</code> where a <code>let</code> is called for, but you also shouldn't use <code>let</code> where a <code>var</code> is most appropriate.</p>
<p>So where should we still use <code>var</code>? Under what circumstances is it a better choice than <code>let</code>?</p>
<p>For one, I always use <code>var</code> in the top-level scope of any function, regardless of whether that's at the beginning, middle, or end of the function. I also use <code>var</code> in the global scope, though I try to minimize usage of the global scope.</p>
<p>Why use <code>var</code> for function scoping? Because that's exactly what <code>var</code> does. There literally is no better tool for the job of function scoping a declaration than a declarator that has, for 25 years, done exactly that.</p>
<p>You <em>could</em> use <code>let</code> in this top-level scope, but it's not the best tool for that job. I also find that if you use <code>let</code> everywhere, then it's less obvious which declarations are designed to be localized and which ones are intended to be used throughout the function.</p>
<p>By contrast, I rarely use a <code>var</code> inside a block. That's what <code>let</code> is for. Use the best tool for the job. If you see a <code>let</code>, it tells you that you're dealing with a localized declaration. If you see <code>var</code>, it tells you that you're dealing with a function-wide declaration. Simple as that.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">getStudents</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-29-2" id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">studentRecords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a href="#__codelineno-29-3" id="__codelineno-29-3" name="__codelineno-29-3"></a>
<a href="#__codelineno-29-4" id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">record</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">records</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-29-5" id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`student-</span><span class="si">${</span><span class="w"> </span><span class="nx">record</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<a href="#__codelineno-29-6" id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">        </span><span class="nx">studentRecords</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
<a href="#__codelineno-29-7" id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="w">            </span><span class="nx">id</span><span class="p">,</span>
<a href="#__codelineno-29-8" id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">            </span><span class="nx">record</span><span class="p">.</span><span class="nx">name</span>
<a href="#__codelineno-29-9" id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="w">        </span><span class="p">});</span>
<a href="#__codelineno-29-10" id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-29-11" id="__codelineno-29-11" name="__codelineno-29-11"></a>
<a href="#__codelineno-29-12" id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">studentRecords</span><span class="p">;</span>
<a href="#__codelineno-29-13" id="__codelineno-29-13" name="__codelineno-29-13"></a><span class="p">}</span>
</code></pre></div>
<p>The <code>studentRecords</code> variable is intended for use across the whole function. <code>var</code> is the best declarator to tell the reader that. By contrast, <code>record</code> and <code>id</code> are intended for use only in the narrower scope of the loop iteration, so <code>let</code> is the best tool for that job.</p>
<p>In addition to this <em>best tool</em> semantic argument, <code>var</code> has a few other characteristics that, in certain limited circumstances, make it more powerful.</p>
<p>One example is when a loop is exclusively using a variable, but its conditional clause cannot see block-scoped declarations inside the iteration:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">commitAction</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-30-2" id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="w">    </span><span class="k">do</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-30-3" id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">commit</span><span class="p">();</span>
<a href="#__codelineno-30-4" id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<a href="#__codelineno-30-5" id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">done</span><span class="p">);</span>
<a href="#__codelineno-30-6" id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="p">}</span>
</code></pre></div>
<p>Here, <code>result</code> is clearly only used inside the block, so we use <code>let</code>. But <code>done</code> is a bit different. It's only useful for the loop, but the <code>while</code> clause cannot see <code>let</code> declarations that appear inside the loop. So we compromise and use <code>var</code>, so that <code>done</code> is hoisted to the outer scope where it can be seen.</p>
<p>The alternative—declaring <code>done</code> outside the loop—separates it from where it's first used, and either necessitates picking a default value to assign, or worse, leaving it unassigned and thus looking ambiguous to the reader. I think <code>var</code> inside the loop is preferable here.</p>
<p>Another helpful characteristic of <code>var</code> is seen with declarations inside unintended blocks. Unintended blocks are blocks that are created because the syntax requires a block, but where the intent of the developer is not really to create a localized scope. The best illustration of unintended scope is the <code>try..catch</code> statement:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-31-1" id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">getStudents</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-31-2" id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-31-3" id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="w">        </span><span class="c1">// not really a block scope</span>
<a href="#__codelineno-31-4" id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">records</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fromCache</span><span class="p">(</span><span class="s2">"students"</span><span class="p">);</span>
<a href="#__codelineno-31-5" id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-31-6" id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="w">    </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-31-7" id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="w">        </span><span class="c1">// oops, fall back to a default</span>
<a href="#__codelineno-31-8" id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">records</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a href="#__codelineno-31-9" id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-31-10" id="__codelineno-31-10" name="__codelineno-31-10"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-31-11" id="__codelineno-31-11" name="__codelineno-31-11"></a><span class="p">}</span>
</code></pre></div>
<p>There are other ways to structure this code, yes. But I think this is the <em>best</em> way, given various trade-offs.</p>
<p>I don't want to declare <code>records</code> (with <code>var</code> or <code>let</code>) outside of the <code>try</code> block, and then assign to it in one or both blocks. I prefer initial declarations to always be as close as possible (ideally, same line) to the first usage of the variable. In this simple example, that would only be a couple of lines distance, but in real code it can grow to many more lines. The bigger the gap, the harder it is to figure out what variable from what scope you're assigning to. <code>var</code> used at the actual assignment makes it less ambiguous.</p>
<p>Also notice I used <code>var</code> in both the <code>try</code> and <code>catch</code> blocks. That's because I want to signal to the reader that no matter which path is taken, <code>records</code> always gets declared. Technically, that works because <code>var</code> is hoisted once to the function scope. But it's still a nice semantic signal to remind the reader what either <code>var</code> ensures. If <code>var</code> were only used in one of the blocks, and you were only reading the other block, you wouldn't as easily discover where <code>records</code> was coming from.</p>
<p>This is, in my opinion, a little superpower of <code>var</code>. Not only can it escape the unintentional <code>try..catch</code> blocks, but it's allowed to appear multiple times in a function's scope. You can't do that with <code>let</code>. It's not bad, it's actually a little helpful feature. Think of <code>var</code> more like a declarative annotation that's reminding you, each usage, where the variable comes from. "Ah ha, right, it belongs to the whole function."</p>
<p>This repeated-annotation superpower is useful in other cases:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-32-1" id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">getStudents</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-32-2" id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a href="#__codelineno-32-3" id="__codelineno-32-3" name="__codelineno-32-3"></a>
<a href="#__codelineno-32-4" id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="w">    </span><span class="c1">// do something with data</span>
<a href="#__codelineno-32-5" id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="w">    </span><span class="c1">// .. 50 more lines of code ..</span>
<a href="#__codelineno-32-6" id="__codelineno-32-6" name="__codelineno-32-6"></a>
<a href="#__codelineno-32-7" id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">    </span><span class="c1">// purely an annotation to remind us</span>
<a href="#__codelineno-32-8" id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">data</span><span class="p">;</span>
<a href="#__codelineno-32-9" id="__codelineno-32-9" name="__codelineno-32-9"></a>
<a href="#__codelineno-32-10" id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="w">    </span><span class="c1">// use data again</span>
<a href="#__codelineno-32-11" id="__codelineno-32-11" name="__codelineno-32-11"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-32-12" id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="p">}</span>
</code></pre></div>
<p>The second <code>var data</code> is not re-declaring <code>data</code>, it's just annotating for the readers' benefit that <code>data</code> is a function-wide declaration. That way, the reader doesn't need to scroll up 50+ lines of code to find the initial declaration.</p>
<p>I'm perfectly fine with re-using variables for multiple purposes throughout a function scope. I'm also perfectly fine with having two usages of a variable be separated by quite a few lines of code. In both cases, the ability to safely "re-declare" (annotate) with <code>var</code> helps make sure I can tell where my <code>data</code> is coming from, no matter where I am in the function.</p>
<p>Again, sadly, <code>let</code> cannot do this.</p>
<p>There are other nuances and scenarios when <code>var</code> turns out to offer some assistance, but I'm not going to belabor the point any further. The takeaway is that <code>var</code> can be useful in our programs alongside <code>let</code> (and the occasional <code>const</code>). Are you willing to creatively use the tools the JS language provides to tell a richer story to your readers?</p>
<p>Don't just throw away a useful tool like <code>var</code> because someone shamed you into thinking it wasn't cool anymore. Don't avoid <code>var</code> because you got confused once years ago. Learn these tools and use them each for what they're best at.</p>
<h2 id="whats-the-deal-with-tdz">What's the Deal with TDZ?<a class="headerlink" href="#whats-the-deal-with-tdz" title="Permanent link">¶</a></h2>
<p>The TDZ (temporal dead zone) was explained in Chapter 5. We illustrated how it occurs, but we skimmed over any explanation of <em>why</em> it was necessary to introduce in the first place. Let's look briefly at the motivations of TDZ.</p>
<p>Some breadcrumbs in the TDZ origin story:</p>
<ul>
<li><code>const</code>s should never change</li>
<li>It's all about time</li>
<li>Should <code>let</code> behave more like <code>const</code> or <code>var</code>?</li>
</ul>
<h3 id="where-it-all-started">Where It All Started<a class="headerlink" href="#where-it-all-started" title="Permanent link">¶</a></h3>
<p>TDZ comes from <code>const</code>, actually.</p>
<p>During early ES6 development work, TC39 had to decide whether <code>const</code> (and <code>let</code>) were going to hoist to the top of their blocks. They decided these declarations would hoist, similar to how <code>var</code> does. Had that not been the case, I think some of the fear was confusion with mid-scope shadowing, such as:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-33-1" id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">greeting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Hi!"</span><span class="p">;</span>
<a href="#__codelineno-33-2" id="__codelineno-33-2" name="__codelineno-33-2"></a>
<a href="#__codelineno-33-3" id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="p">{</span>
<a href="#__codelineno-33-4" id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">    </span><span class="c1">// what should print here?</span>
<a href="#__codelineno-33-5" id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">greeting</span><span class="p">);</span>
<a href="#__codelineno-33-6" id="__codelineno-33-6" name="__codelineno-33-6"></a>
<a href="#__codelineno-33-7" id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="w">    </span><span class="c1">// .. a bunch of lines of code ..</span>
<a href="#__codelineno-33-8" id="__codelineno-33-8" name="__codelineno-33-8"></a>
<a href="#__codelineno-33-9" id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="w">    </span><span class="c1">// now shadowing the `greeting` variable</span>
<a href="#__codelineno-33-10" id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">greeting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Hello, friends!"</span><span class="p">;</span>
<a href="#__codelineno-33-11" id="__codelineno-33-11" name="__codelineno-33-11"></a>
<a href="#__codelineno-33-12" id="__codelineno-33-12" name="__codelineno-33-12"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-33-13" id="__codelineno-33-13" name="__codelineno-33-13"></a><span class="p">}</span>
</code></pre></div>
<p>What should we do with that <code>console.log(..)</code> statement? Would it make any sense to JS devs for it to print "Hi!"? Seems like that could be a gotcha, to have shadowing kick in only for the second half of the block, but not the first half. That's not very intuitive, JS-like behavior. So <code>let</code> and <code>const</code> have to hoist to the top of the block, visible throughout.</p>
<p>But if <code>let</code> and <code>const</code> hoist to the top of the block (like <code>var</code> hoists to the top of a function), why don't <code>let</code> and <code>const</code> auto-initialize (to <code>undefined</code>) the way <code>var</code> does? Here was the main concern:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-34-1" id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="p">{</span>
<a href="#__codelineno-34-2" id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="w">    </span><span class="c1">// what should print here?</span>
<a href="#__codelineno-34-3" id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">studentName</span><span class="p">);</span>
<a href="#__codelineno-34-4" id="__codelineno-34-4" name="__codelineno-34-4"></a>
<a href="#__codelineno-34-5" id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="w">    </span><span class="c1">// later</span>
<a href="#__codelineno-34-6" id="__codelineno-34-6" name="__codelineno-34-6"></a>
<a href="#__codelineno-34-7" id="__codelineno-34-7" name="__codelineno-34-7"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">studentName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Frank"</span><span class="p">;</span>
<a href="#__codelineno-34-8" id="__codelineno-34-8" name="__codelineno-34-8"></a>
<a href="#__codelineno-34-9" id="__codelineno-34-9" name="__codelineno-34-9"></a><span class="w">    </span><span class="c1">// ..</span>
<a href="#__codelineno-34-10" id="__codelineno-34-10" name="__codelineno-34-10"></a><span class="p">}</span>
</code></pre></div>
<p>Let's imagine that <code>studentName</code> not only hoisted to the top of this block, but was also auto-initialized to <code>undefined</code>. For the first half of the block, <code>studentName</code> could be observed to have the <code>undefined</code> value, such as with our <code>console.log(..)</code> statement. Once the <code>const studentName = ..</code> statement is reached, now <code>studentName</code> is assigned <code>"Frank"</code>. From that point forward, <code>studentName</code> can't ever be re-assigned.</p>
<p>But, is it strange or surprising that a constant observably has two different values, first <code>undefined</code>, then <code>"Frank"</code>? That does seem to go against what we think a <code>const</code>ant means; it should only ever be observable with one value.</p>
<p>So... now we have a problem. We can't auto-initialize <code>studentName</code> to <code>undefined</code> (or any other value for that matter). But the variable has to exist throughout the whole scope. What do we do with the period of time from when it first exists (beginning of scope) and when it's assigned its value?</p>
<p>We call this period of time the "dead zone," as in the "temporal dead zone" (TDZ). To prevent confusion, it was determined that any sort of access of a variable while in its TDZ is illegal and must result in the TDZ error.</p>
<p>OK, that line of reasoning does make some sense, I must admit.</p>
<h3 id="who-let-the-tdz-out">Who <code>let</code> the TDZ Out?<a class="headerlink" href="#who-let-the-tdz-out" title="Permanent link">¶</a></h3>
<p>But that's just <code>const</code>. What about <code>let</code>?</p>
<p>Well, TC39 made the decision: since we need a TDZ for <code>const</code>, we might as well have a TDZ for <code>let</code> as well. <em>In fact, if we make let have a TDZ, then we discourage all that ugly variable hoisting people do.</em> So there was a consistency perspective and, perhaps, a bit of social engineering to shift developers' behavior.</p>
<p>My counter-argument would be: if you're favoring consistency, be consistent with <code>var</code> instead of <code>const</code>; <code>let</code> is definitely more like <code>var</code> than <code>const</code>. That's especially true since they had already chosen consistency with <code>var</code> for the whole hoisting-to-the-top-of-the-scope thing. Let <code>const</code> be its own unique deal with a TDZ, and let the answer to TDZ purely be: just avoid the TDZ by always declaring your constants at the top of the scope. I think this would have been more reasonable.</p>
<p>But alas, that's not how it landed. <code>let</code> has a TDZ because <code>const</code> needs a TDZ, because <code>let</code> and <code>const</code> mimic <code>var</code> in their hoisting to the top of the (block) scope. There ya go. Too circular? Read it again a few times.</p>
<h2 id="are-synchronous-callbacks-still-closures">Are Synchronous Callbacks Still Closures?<a class="headerlink" href="#are-synchronous-callbacks-still-closures" title="Permanent link">¶</a></h2>
<p>Chapter 7 presented two different models for tackling closure:</p>
<ul>
<li>
<p>Closure is a function instance remembering its outer variables even as that function is passed around and <strong>invoked in</strong> other scopes.</p>
</li>
<li>
<p>Closure is a function instance and its scope environment being preserved in-place while any references to it are passed around and <strong>invoked from</strong> other scopes.</p>
</li>
</ul>
<p>These models are not wildly divergent, but they do approach from a different perspective. And that different perspective changes what we identify as a closure.</p>
<p>Don't get lost following this rabbit trail through closures and callbacks:</p>
<ul>
<li>Calling back to what (or where)?</li>
<li>Maybe "synchronous callback" isn't the best label</li>
<li><strong><em>IIF</em></strong> functions don't move around, why would they need closure?</li>
<li>Deferring over time is key to closure</li>
</ul>
<h3 id="what-is-a-callback">What is a Callback?<a class="headerlink" href="#what-is-a-callback" title="Permanent link">¶</a></h3>
<p>Before we revisit closure, let me spend a brief moment addressing the word "callback." It's a generally accepted norm that saying "callback" is synonymous with both <em>asynchronous callbacks</em> and <em>synchronous callbacks</em>. I don't think I agree that this is a good idea, so I want to explain why and propose we move away from that to another term.</p>
<p>Let's first consider an <em>asynchronous callback</em>, a function reference that will be invoked at some future <em>later</em> point. What does "callback" mean, in this case?</p>
<p>It means that the current code has finished or paused, suspended itself, and that when the function in question is invoked later, execution is entering back into the suspended program, resuming it. Specifically, the point of re-entry is the code that was wrapped in the function reference:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-35-1" id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="nx">waitForASecond</span><span class="p">(){</span>
<a href="#__codelineno-35-2" id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="w">    </span><span class="c1">// this is where JS should call back into</span>
<a href="#__codelineno-35-3" id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="w">    </span><span class="c1">// the program when the timer has elapsed</span>
<a href="#__codelineno-35-4" id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="p">},</span><span class="mf">1000</span><span class="p">);</span>
<a href="#__codelineno-35-5" id="__codelineno-35-5" name="__codelineno-35-5"></a>
<a href="#__codelineno-35-6" id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="c1">// this is where the current program finishes</span>
<a href="#__codelineno-35-7" id="__codelineno-35-7" name="__codelineno-35-7"></a><span class="c1">// or suspends</span>
</code></pre></div>
<p>In this context, "calling back" makes a lot of sense. The JS engine is resuming our suspended program by <em>calling back in</em> at a specific location. OK, so a callback is asynchronous.</p>
<h3 id="synchronous-callback">Synchronous Callback?<a class="headerlink" href="#synchronous-callback" title="Permanent link">¶</a></h3>
<p>But what about <em>synchronous callbacks</em>? Consider:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-36-1" id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">getLabels</span><span class="p">(</span><span class="nx">studentIDs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-36-2" id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">studentIDs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span>
<a href="#__codelineno-36-3" id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="w">        </span><span class="kd">function</span><span class="w"> </span><span class="nx">formatIDLabel</span><span class="p">(</span><span class="nx">id</span><span class="p">){</span>
<a href="#__codelineno-36-4" id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="sb">`Student ID: </span><span class="si">${</span>
<a href="#__codelineno-36-5" id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="w">               </span><span class="nb">String</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">padStart</span><span class="p">(</span><span class="mf">6</span><span class="p">)</span>
<a href="#__codelineno-36-6" id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="w">            </span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<a href="#__codelineno-36-7" id="__codelineno-36-7" name="__codelineno-36-7"></a><span class="w">        </span><span class="p">}</span>
<a href="#__codelineno-36-8" id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="w">    </span><span class="p">);</span>
<a href="#__codelineno-36-9" id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="p">}</span>
<a href="#__codelineno-36-10" id="__codelineno-36-10" name="__codelineno-36-10"></a>
<a href="#__codelineno-36-11" id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="nx">getLabels</span><span class="p">([</span><span class="w"> </span><span class="mf">14</span><span class="p">,</span><span class="w"> </span><span class="mf">73</span><span class="p">,</span><span class="w"> </span><span class="mf">112</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="p">]);</span>
<a href="#__codelineno-36-12" id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="c1">// [</span>
<a href="#__codelineno-36-13" id="__codelineno-36-13" name="__codelineno-36-13"></a><span class="c1">//    "Student ID: 000014",</span>
<a href="#__codelineno-36-14" id="__codelineno-36-14" name="__codelineno-36-14"></a><span class="c1">//    "Student ID: 000073",</span>
<a href="#__codelineno-36-15" id="__codelineno-36-15" name="__codelineno-36-15"></a><span class="c1">//    "Student ID: 000112",</span>
<a href="#__codelineno-36-16" id="__codelineno-36-16" name="__codelineno-36-16"></a><span class="c1">//    "Student ID: 000006"</span>
<a href="#__codelineno-36-17" id="__codelineno-36-17" name="__codelineno-36-17"></a><span class="c1">// ]</span>
</code></pre></div>
<p>Should we refer to <code>formatIDLabel(..)</code> as a callback? Is the <code>map(..)</code> utility really <em>calling back</em> into our program by invoking the function we provided?</p>
<p>There's nothing to <em>call back into</em> per se, because the program hasn't paused or exited. We're passing a function (reference) from one part of the program to another part of the program, and then it's immediately invoked.</p>
<p>There's other established terms that might match what we're doing—passing in a function (reference) so that another part of the program can invoke it on our behalf. You might think of this as <em>Dependency Injection</em> (DI) or <em>Inversion of Control</em> (IoC).</p>
<p>DI can be summarized as passing in necessary part(s) of functionality to another part of the program so that it can invoke them to complete its work. That's a decent description for the <code>map(..)</code> call above, isn't it? The <code>map(..)</code> utility knows to iterate over the list's values, but it doesn't know what to <em>do</em> with those values. That's why we pass it the <code>formatIDLabel(..)</code> function. We pass in the dependency.</p>
<p>IoC is a pretty similar, related concept. Inversion of control means that instead of the current area of your program controlling what's happening, you hand control off to another part of the program. We wrapped the logic for computing a label string in the function <code>formatIDLabel(..)</code>, then handed invocation control to the <code>map(..)</code> utility.</p>
<p>Notably, Martin Fowler cites IoC as the difference between a framework and a library: with a library, you call its functions; with a framework, it calls your functions. <sup id="fnref:fowlerIOC"><a class="footnote-ref" href="#fn:fowlerIOC">1</a></sup></p>
<p>In the context of our discussion, either DI or IoC could work as an alternative label for a <em>synchronous callback</em>.</p>
<p>But I have a different suggestion. Let's refer to (the functions formerly known as) <em>synchronous callbacks</em>, as <em>inter-invoked functions</em> (IIFs). Yes, exactly, I'm playing off IIFEs. These kinds of functions are <em>inter-invoked</em>, meaning: another entity invokes them, as opposed to IIFEs, which invoke themselves immediately.</p>
<p>What's the relationship between an <em>asynchronous callback</em> and an IIF? An <em>asynchronous callback</em> is an IIF that's invoked asynchronously instead of synchronously.</p>
<h3 id="synchronous-closure">Synchronous Closure?<a class="headerlink" href="#synchronous-closure" title="Permanent link">¶</a></h3>
<p>Now that we've re-labeled <em>synchronous callbacks</em> as IIFs, we can return to our main question: are IIFs an example of closure? Obviously, the IIF would have to reference variable(s) from an outer scope for it to have any chance of being a closure. The <code>formatIDLabel(..)</code> IIF from earlier does not reference any variables outside its own scope, so it's definitely not a closure.</p>
<p>What about an IIF that does have external references, is that closure?</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-37-1" id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">printLabels</span><span class="p">(</span><span class="nx">labels</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-37-2" id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"labelsList"</span><span class="p">);</span>
<a href="#__codelineno-37-3" id="__codelineno-37-3" name="__codelineno-37-3"></a>
<a href="#__codelineno-37-4" id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="w">    </span><span class="nx">labels</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span>
<a href="#__codelineno-37-5" id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="w">        </span><span class="kd">function</span><span class="w"> </span><span class="nx">renderLabel</span><span class="p">(</span><span class="nx">label</span><span class="p">){</span>
<a href="#__codelineno-37-6" id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="nx">li</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">"li"</span><span class="p">);</span>
<a href="#__codelineno-37-7" id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="w">            </span><span class="nx">li</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">label</span><span class="p">;</span>
<a href="#__codelineno-37-8" id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="w">            </span><span class="nx">list</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">li</span><span class="p">);</span>
<a href="#__codelineno-37-9" id="__codelineno-37-9" name="__codelineno-37-9"></a><span class="w">        </span><span class="p">}</span>
<a href="#__codelineno-37-10" id="__codelineno-37-10" name="__codelineno-37-10"></a><span class="w">    </span><span class="p">);</span>
<a href="#__codelineno-37-11" id="__codelineno-37-11" name="__codelineno-37-11"></a><span class="p">}</span>
</code></pre></div>
<p>The inner <code>renderLabel(..)</code> IIF references <code>list</code> from the enclosing scope, so it's an IIF that <em>could</em> have closure. But here's where the definition/model we choose for closure matters:</p>
<ul>
<li>
<p>If <code>renderLabel(..)</code> is a <strong>function that gets passed somewhere else</strong>, and that function is then invoked, then yes, <code>renderLabel(..)</code> is exercising a closure, because closure is what preserved its access to its original scope chain.</p>
</li>
<li>
<p>But if, as in the alternative conceptual model from Chapter 7, <code>renderLabel(..)</code> stays in place, and only a reference to it is passed to <code>forEach(..)</code>, is there any need for closure to preserve the scope chain of <code>renderLabel(..)</code>, while it executes synchronously right inside its own scope?</p>
</li>
</ul>
<p>No. That's just normal LEXICAL scope.</p>
<p>To understand why, consider this alternative form of <code>printLabels(..)</code>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-38-1" id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">printLabels</span><span class="p">(</span><span class="nx">labels</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-38-2" id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"labelsList"</span><span class="p">);</span>
<a href="#__codelineno-38-3" id="__codelineno-38-3" name="__codelineno-38-3"></a>
<a href="#__codelineno-38-4" id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">labels</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-38-5" id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="w">        </span><span class="c1">// just a normal function call in its own</span>
<a href="#__codelineno-38-6" id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="w">        </span><span class="c1">// scope, right? That's not really closure!</span>
<a href="#__codelineno-38-7" id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="w">        </span><span class="nx">renderLabel</span><span class="p">(</span><span class="nx">label</span><span class="p">);</span>
<a href="#__codelineno-38-8" id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-38-9" id="__codelineno-38-9" name="__codelineno-38-9"></a>
<a href="#__codelineno-38-10" id="__codelineno-38-10" name="__codelineno-38-10"></a><span class="w">    </span><span class="c1">// **************</span>
<a href="#__codelineno-38-11" id="__codelineno-38-11" name="__codelineno-38-11"></a>
<a href="#__codelineno-38-12" id="__codelineno-38-12" name="__codelineno-38-12"></a><span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">renderLabel</span><span class="p">(</span><span class="nx">label</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-38-13" id="__codelineno-38-13" name="__codelineno-38-13"></a><span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">li</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">"li"</span><span class="p">);</span>
<a href="#__codelineno-38-14" id="__codelineno-38-14" name="__codelineno-38-14"></a><span class="w">        </span><span class="nx">li</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">label</span><span class="p">;</span>
<a href="#__codelineno-38-15" id="__codelineno-38-15" name="__codelineno-38-15"></a><span class="w">        </span><span class="nx">list</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">li</span><span class="p">);</span>
<a href="#__codelineno-38-16" id="__codelineno-38-16" name="__codelineno-38-16"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-38-17" id="__codelineno-38-17" name="__codelineno-38-17"></a><span class="p">}</span>
</code></pre></div>
<p>These two versions of <code>printLabels(..)</code> are essentially the same.</p>
<p>The latter one is definitely not an example of closure, at least not in any useful or observable sense. It's just LEXICAL scope. The former version, with <code>forEach(..)</code> calling our function reference, is essentially the same thing. It's also not closure, but rather just a plain ol' LEXICAL scope function call.</p>
<h3 id="defer-to-closure">Defer to Closure<a class="headerlink" href="#defer-to-closure" title="Permanent link">¶</a></h3>
<p>By the way, Chapter 7 briefly mentioned partial application and currying (which <em>do</em> rely on closure!). This is an interesting scenario where manual currying can be used:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-39-1" id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">printLabels</span><span class="p">(</span><span class="nx">labels</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-39-2" id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"labelsList"</span><span class="p">);</span>
<a href="#__codelineno-39-3" id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">renderLabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">renderTo</span><span class="p">(</span><span class="nx">list</span><span class="p">);</span>
<a href="#__codelineno-39-4" id="__codelineno-39-4" name="__codelineno-39-4"></a>
<a href="#__codelineno-39-5" id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="w">    </span><span class="c1">// definitely closure this time!</span>
<a href="#__codelineno-39-6" id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="w">    </span><span class="nx">labels</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="w"> </span><span class="nx">renderLabel</span><span class="w"> </span><span class="p">);</span>
<a href="#__codelineno-39-7" id="__codelineno-39-7" name="__codelineno-39-7"></a>
<a href="#__codelineno-39-8" id="__codelineno-39-8" name="__codelineno-39-8"></a><span class="w">    </span><span class="c1">// **************</span>
<a href="#__codelineno-39-9" id="__codelineno-39-9" name="__codelineno-39-9"></a>
<a href="#__codelineno-39-10" id="__codelineno-39-10" name="__codelineno-39-10"></a><span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">renderTo</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-39-11" id="__codelineno-39-11" name="__codelineno-39-11"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">createLabel</span><span class="p">(</span><span class="nx">label</span><span class="p">){</span>
<a href="#__codelineno-39-12" id="__codelineno-39-12" name="__codelineno-39-12"></a><span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="nx">li</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">"li"</span><span class="p">);</span>
<a href="#__codelineno-39-13" id="__codelineno-39-13" name="__codelineno-39-13"></a><span class="w">            </span><span class="nx">li</span><span class="p">.</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">label</span><span class="p">;</span>
<a href="#__codelineno-39-14" id="__codelineno-39-14" name="__codelineno-39-14"></a><span class="w">            </span><span class="nx">list</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">li</span><span class="p">);</span>
<a href="#__codelineno-39-15" id="__codelineno-39-15" name="__codelineno-39-15"></a><span class="w">        </span><span class="p">};</span>
<a href="#__codelineno-39-16" id="__codelineno-39-16" name="__codelineno-39-16"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-39-17" id="__codelineno-39-17" name="__codelineno-39-17"></a><span class="p">}</span>
</code></pre></div>
<p>The inner function <code>createLabel(..)</code>, which we assign to <code>renderLabel</code>, is closed over <code>list</code>, so closure is definitely being utilized.</p>
<p>Closure allows us to remember <code>list</code> for later, while we defer execution of the actual label-creation logic from the <code>renderTo(..)</code> call to the subsequent <code>forEach(..)</code> invocations of the <code>createLabel(..)</code> IIF. That may only be a brief moment here, but any amount of time could pass, as closure bridges from call to call.</p>
<h2 id="classic-module-variations">Classic Module Variations<a class="headerlink" href="#classic-module-variations" title="Permanent link">¶</a></h2>
<p>Chapter 8 explained the classic module pattern, which can look like this:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-40-1" id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="kd">var</span><span class="w"> </span><span class="nx">StudentList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="nx">defineModule</span><span class="p">(</span><span class="nx">Student</span><span class="p">){</span>
<a href="#__codelineno-40-2" id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">elems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a href="#__codelineno-40-3" id="__codelineno-40-3" name="__codelineno-40-3"></a>
<a href="#__codelineno-40-4" id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">publicAPI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-40-5" id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="w">        </span><span class="nx">renderList</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-40-6" id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="w">            </span><span class="c1">// ..</span>
<a href="#__codelineno-40-7" id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="w">        </span><span class="p">}</span>
<a href="#__codelineno-40-8" id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="w">    </span><span class="p">};</span>
<a href="#__codelineno-40-9" id="__codelineno-40-9" name="__codelineno-40-9"></a>
<a href="#__codelineno-40-10" id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">publicAPI</span><span class="p">;</span>
<a href="#__codelineno-40-11" id="__codelineno-40-11" name="__codelineno-40-11"></a>
<a href="#__codelineno-40-12" id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="p">})(</span><span class="nx">Student</span><span class="p">);</span>
</code></pre></div>
<p>Notice that we're passing <code>Student</code> (another module instance) in as a dependency. But there's lots of useful variations on this module form you may encounter. Some hints for recognizing these variations:</p>
<ul>
<li>Does the module know about its own API?</li>
<li>Even if we use a fancy module loader, it's just a classic module</li>
<li>Some modules need to work universally</li>
</ul>
<h3 id="wheres-my-api">Where's My API?<a class="headerlink" href="#wheres-my-api" title="Permanent link">¶</a></h3>
<p>First, most classic modules don't define and use a <code>publicAPI</code> the way I have shown in this code. Instead, they typically look like:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-41-1" id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="kd">var</span><span class="w"> </span><span class="nx">StudentList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="nx">defineModule</span><span class="p">(</span><span class="nx">Student</span><span class="p">){</span>
<a href="#__codelineno-41-2" id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">elems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a href="#__codelineno-41-3" id="__codelineno-41-3" name="__codelineno-41-3"></a>
<a href="#__codelineno-41-4" id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-41-5" id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="w">        </span><span class="nx">renderList</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-41-6" id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="w">            </span><span class="c1">// ..</span>
<a href="#__codelineno-41-7" id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="w">        </span><span class="p">}</span>
<a href="#__codelineno-41-8" id="__codelineno-41-8" name="__codelineno-41-8"></a><span class="w">    </span><span class="p">};</span>
<a href="#__codelineno-41-9" id="__codelineno-41-9" name="__codelineno-41-9"></a>
<a href="#__codelineno-41-10" id="__codelineno-41-10" name="__codelineno-41-10"></a><span class="p">})(</span><span class="nx">Student</span><span class="p">);</span>
</code></pre></div>
<p>The only difference here is directly returning the object that serves as the public API for the module, as opposed to first saving it to an inner <code>publicAPI</code> variable. This is by far how most classic modules are defined.</p>
<p>But I strongly prefer, and always use myself, the former <code>publicAPI</code> form. Two reasons:</p>
<ul>
<li>
<p><code>publicAPI</code> is a semantic descriptor that aids readability by making it more obvious what the purpose of the object is.</p>
</li>
<li>
<p>Storing an inner <code>publicAPI</code> variable that references the same external public API object returned, can be useful if you need to access or modify the API during the lifetime of the module.</p>
<p>For example, you may want to call one of the publicly exposed functions, from inside the module. Or, you may want to add or remove methods depending on certain conditions, or update the value of an exposed property.</p>
<p>Whatever the case may be, it just seems rather silly to me that we <em>wouldn't</em> maintain a reference to access our own API. Right?</p>
</li>
</ul>
<h3 id="asynchronous-module-definition-amd">Asynchronous Module Definition (AMD)<a class="headerlink" href="#asynchronous-module-definition-amd" title="Permanent link">¶</a></h3>
<p>Another variation on the classic module form is AMD-style modules (popular several years back), such as those supported by the RequireJS utility:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-42-1" id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="nx">define</span><span class="p">([</span><span class="w"> </span><span class="s2">"./Student"</span><span class="w"> </span><span class="p">],</span><span class="kd">function</span><span class="w"> </span><span class="nx">StudentList</span><span class="p">(</span><span class="nx">Student</span><span class="p">){</span>
<a href="#__codelineno-42-2" id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">elems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a href="#__codelineno-42-3" id="__codelineno-42-3" name="__codelineno-42-3"></a>
<a href="#__codelineno-42-4" id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-42-5" id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="w">        </span><span class="nx">renderList</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-42-6" id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="w">            </span><span class="c1">// ..</span>
<a href="#__codelineno-42-7" id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="w">        </span><span class="p">}</span>
<a href="#__codelineno-42-8" id="__codelineno-42-8" name="__codelineno-42-8"></a><span class="w">    </span><span class="p">};</span>
<a href="#__codelineno-42-9" id="__codelineno-42-9" name="__codelineno-42-9"></a><span class="p">});</span>
</code></pre></div>
<p>If you look closely at <code>StudentList(..)</code>, it's a classic module factory function. Inside the machinery of <code>define(..)</code> (provided by RequireJS), the <code>StudentList(..)</code> function is executed, passing to it any other module instances declared as dependencies. The return value is an object representing the public API for the module.</p>
<p>This is based on exactly the same principles (including how the closure works!) as we explored with classic modules.</p>
<h3 id="universal-modules-umd">Universal Modules (UMD)<a class="headerlink" href="#universal-modules-umd" title="Permanent link">¶</a></h3>
<p>The final variation we'll look at is UMD, which is less a specific, exact format and more a collection of very similar formats. It was designed to create better interop (without any build-tool conversion) for modules that may be loaded in browsers, by AMD-style loaders, or in Node. I personally still publish many of my utility libraries using a form of UMD.</p>
<p>Here's the typical structure of a UMD:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-43-1" id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="nx">UMD</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">context</span><span class="p">,</span><span class="nx">definition</span><span class="p">){</span>
<a href="#__codelineno-43-2" id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="w">    </span><span class="c1">// loaded by an AMD-style loader?</span>
<a href="#__codelineno-43-3" id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<a href="#__codelineno-43-4" id="__codelineno-43-4" name="__codelineno-43-4"></a><span class="w">        </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">define</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"function"</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<a href="#__codelineno-43-5" id="__codelineno-43-5" name="__codelineno-43-5"></a><span class="w">        </span><span class="nx">define</span><span class="p">.</span><span class="nx">amd</span>
<a href="#__codelineno-43-6" id="__codelineno-43-6" name="__codelineno-43-6"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-43-7" id="__codelineno-43-7" name="__codelineno-43-7"></a><span class="w">        </span><span class="nx">define</span><span class="p">(</span><span class="nx">definition</span><span class="p">);</span>
<a href="#__codelineno-43-8" id="__codelineno-43-8" name="__codelineno-43-8"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-43-9" id="__codelineno-43-9" name="__codelineno-43-9"></a><span class="w">    </span><span class="c1">// in Node?</span>
<a href="#__codelineno-43-10" id="__codelineno-43-10" name="__codelineno-43-10"></a><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<a href="#__codelineno-43-11" id="__codelineno-43-11" name="__codelineno-43-11"></a><span class="w">        </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">module</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s2">"undefined"</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<a href="#__codelineno-43-12" id="__codelineno-43-12" name="__codelineno-43-12"></a><span class="w">        </span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span>
<a href="#__codelineno-43-13" id="__codelineno-43-13" name="__codelineno-43-13"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-43-14" id="__codelineno-43-14" name="__codelineno-43-14"></a><span class="w">        </span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">definition</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">context</span><span class="p">);</span>
<a href="#__codelineno-43-15" id="__codelineno-43-15" name="__codelineno-43-15"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-43-16" id="__codelineno-43-16" name="__codelineno-43-16"></a><span class="w">    </span><span class="c1">// assume standalone browser script</span>
<a href="#__codelineno-43-17" id="__codelineno-43-17" name="__codelineno-43-17"></a><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-43-18" id="__codelineno-43-18" name="__codelineno-43-18"></a><span class="w">        </span><span class="nx">context</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">definition</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">context</span><span class="p">);</span>
<a href="#__codelineno-43-19" id="__codelineno-43-19" name="__codelineno-43-19"></a><span class="w">    </span><span class="p">}</span>
<a href="#__codelineno-43-20" id="__codelineno-43-20" name="__codelineno-43-20"></a><span class="p">})(</span><span class="s2">"StudentList"</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="kd">function</span><span class="w"> </span><span class="nx">DEF</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">context</span><span class="p">){</span>
<a href="#__codelineno-43-21" id="__codelineno-43-21" name="__codelineno-43-21"></a>
<a href="#__codelineno-43-22" id="__codelineno-43-22" name="__codelineno-43-22"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">elems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a href="#__codelineno-43-23" id="__codelineno-43-23" name="__codelineno-43-23"></a>
<a href="#__codelineno-43-24" id="__codelineno-43-24" name="__codelineno-43-24"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-43-25" id="__codelineno-43-25" name="__codelineno-43-25"></a><span class="w">        </span><span class="nx">renderList</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-43-26" id="__codelineno-43-26" name="__codelineno-43-26"></a><span class="w">            </span><span class="c1">// ..</span>
<a href="#__codelineno-43-27" id="__codelineno-43-27" name="__codelineno-43-27"></a><span class="w">        </span><span class="p">}</span>
<a href="#__codelineno-43-28" id="__codelineno-43-28" name="__codelineno-43-28"></a><span class="w">    </span><span class="p">};</span>
<a href="#__codelineno-43-29" id="__codelineno-43-29" name="__codelineno-43-29"></a>
<a href="#__codelineno-43-30" id="__codelineno-43-30" name="__codelineno-43-30"></a><span class="p">});</span>
</code></pre></div>
<p>Though it may look a bit unusual, UMD is really just an IIFE.</p>
<p>What's different is that the main <code>function</code> expression part (at the top) of the IIFE contains a series of <code>if..else if</code> statements to detect which of the three supported environments the module is being loaded in.</p>
<p>The final <code>()</code> that normally invokes an IIFE is being passed three arguments: <code>"StudentsList"</code>, <code>this</code>, and another <code>function</code> expression. If you match those arguments to their parameters, you'll see they are: <code>name</code>, <code>context</code>, and <code>definition</code>, respectively. <code>"StudentList"</code> (<code>name</code>) is the name label for the module, primarily in case it's defined as a global variable. <code>this</code> (<code>context</code>) is generally the <code>window</code> (aka, global object; see Chapter 4) for defining the module by its name.</p>
<p><code>definition(..)</code> is invoked to actually retrieve the definition of the module, and you'll notice that, sure enough, that's just a classic module form!</p>
<p>There's no question that as of the time of this writing, ESM (ES Modules) are becoming popular and widespread rapidly. But with millions and millions of modules written over the last 20 years, all using some pre-ESM variation of classic modules, they're still very important to be able to read and understand when you come across them.</p>
<div class="footnote">
<hr/>
<ol>
<li id="fn:fowlerIOC">
<p><em>Inversion of Control</em>, Martin Fowler, https://martinfowler.com/bliki/InversionOfControl.html, 26 June 2005. <a class="footnote-backref" href="#fnref:fowlerIOC" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
</ol>
</div>
<script async="" crossorigin="anonymous" data-category="General" data-category-id="DIC_kwDOKciK6s4CZ5Xs" data-emit-metadata="0" data-input-position="bottom" data-lang="en" data-mapping="pathname" data-reactions-enabled="1" data-repo="shane0/learning_js" data-repo-id="R_kgDOKciK6g" data-strict="0" data-theme="noborder_dark" src="https://giscus.app/client.js">
</script>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Scope &amp; Closures - 2nd Edition" class="md-footer__link md-footer__link--prev" href="../" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                  Previous
                </span>
                Scope &amp; Closures - 2nd Edition
              </div>
</div>
</a>
<a aria-label="Next: Appendix B: Practice" class="md-footer__link md-footer__link--next" href="../apB/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                  Next
                </span>
                Appendix B: Practice
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://shanenull.com/" rel="noopener" target="_blank" title="shanenull.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M256 8C119.3 8 8 119.2 8 256c0 136.7 111.3 248 248 248s248-111.3 248-248C504 119.2 392.7 8 256 8zM33 256c0-32.3 6.9-63 19.3-90.7l106.4 291.4C84.3 420.5 33 344.2 33 256zm223 223c-21.9 0-43-3.2-63-9.1l66.9-194.4 68.5 187.8c.5 1.1 1 2.1 1.6 3.1-23.1 8.1-48 12.6-74 12.6zm30.7-327.5c13.4-.7 25.5-2.1 25.5-2.1 12-1.4 10.6-19.1-1.4-18.4 0 0-36.1 2.8-59.4 2.8-21.9 0-58.7-2.8-58.7-2.8-12-.7-13.4 17.7-1.4 18.4 0 0 11.4 1.4 23.4 2.1l34.7 95.2L200.6 393l-81.2-241.5c13.4-.7 25.5-2.1 25.5-2.1 12-1.4 10.6-19.1-1.4-18.4 0 0-36.1 2.8-59.4 2.8-4.2 0-9.1-.1-14.4-.3C109.6 73 178.1 33 256 33c58 0 110.9 22.2 150.6 58.5-1-.1-1.9-.2-2.9-.2-21.9 0-37.4 19.1-37.4 39.6 0 18.4 10.6 33.9 21.9 52.3 8.5 14.8 18.4 33.9 18.4 61.5 0 19.1-7.3 41.2-17 72.1l-22.2 74.3-80.7-239.6zm81.4 297.2 68.1-196.9c12.7-31.8 17-57.2 17-79.9 0-8.2-.5-15.8-1.5-22.9 17.4 31.8 27.3 68.2 27.3 107 0 82.3-44.6 154.1-110.9 192.7z"></path></svg>
</a>
<a class="md-social__link" href="https://shane0.pythonanywhere.com/" rel="noopener" target="_blank" title="shane0.pythonanywhere.com">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg>
</a>
<a class="md-social__link" href="http://www.youtube.com/c/ShaneNull" rel="noopener" target="_blank" title="www.youtube.com">
<svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg>
</a>
<a class="md-social__link" href="https://www.instagram.com/nullshane/" rel="noopener" target="_blank" title="www.instagram.com">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg>
</a>
<a class="md-social__link" href="https://earmassagetherapist.bandcamp.com/releases" rel="noopener" target="_blank" title="earmassagetherapist.bandcamp.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8Zm48.2 326.1h-181L207.9 178h181Z"></path></svg>
</a>
<a class="md-social__link" href="https://github.com/shane0" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
<a class="md-social__link" href="https://gitlab.com/shane0" rel="noopener" target="_blank" title="gitlab.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m503.5 204.6-.7-1.8-69.7-181.78c-1.4-3.57-3.9-6.59-7.2-8.64-2.4-1.55-5.1-2.515-8-2.81-2.9-.295-5.7.083-8.4 1.11-2.7 1.02-5.1 2.66-7.1 4.78-1.9 2.12-3.3 4.67-4.1 7.44l-47 144H160.8l-47.1-144c-.8-2.77-2.2-5.31-4.1-7.43-2-2.12-4.4-3.75-7.1-4.77a18.1 18.1 0 0 0-8.38-1.113 18.4 18.4 0 0 0-8.04 2.793 18.09 18.09 0 0 0-7.16 8.64L9.267 202.8l-.724 1.8a129.57 129.57 0 0 0-3.52 82c7.747 26.9 24.047 50.7 46.447 67.6l.27.2.59.4 105.97 79.5 52.6 39.7 32 24.2c3.7 1.9 8.3 4.3 13 4.3 4.7 0 9.3-2.4 13-4.3l32-24.2 52.6-39.7 106.7-79.9.3-.3c22.4-16.9 38.7-40.6 45.6-67.5 8.6-27 7.4-55.8-2.6-82z"></path></svg>
</a>
<a class="md-social__link" href="https://twitter.com/shane_null" rel="noopener" target="_blank" title="twitter.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
</a>
<a class="md-social__link" href="https://www.linkedin.com/in/shanenull" rel="noopener" target="_blank" title="www.linkedin.com">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.action.edit", "content.action.view", "navigation.footer"], "search": "../../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": 2023, "provider": "mike"}}</script>
<script src="../../../assets/javascripts/bundle.51d95adb.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js?tex"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>